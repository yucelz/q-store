# Quantum Database v3.1 - Hardware-Agnostic Implementation

## ğŸ¯ What's New in v3.1

### Major Improvements from v2.0

1. **Hardware Abstraction Layer**
   - âœ… No longer locked to IonQ or Cirq
   - âœ… Support for multiple quantum SDKs (Cirq, Qiskit, and more)
   - âœ… Easy to add new quantum backends via plugin architecture
   - âœ… Mock backend for testing without quantum hardware

2. **Flexibility & Future-Proofing**
   - âœ… Switch between quantum providers without code changes
   - âœ… Compare performance across different SDKs
   - âœ… Ready for emerging quantum hardware vendors
   - âœ… Graceful degradation when quantum backend unavailable

3. **Improved Testability**
   - âœ… Mock quantum backend for unit testing
   - âœ… No API keys required for development
   - âœ… Deterministic testing possible
   - âœ… Easier CI/CD integration

## ğŸš€ Quick Start

### Installation

The core package has no quantum SDK dependencies by default:

```bash
# Core installation
cd /home/yucelz/yz_code/q-store
pip install -e .

# Optional: Add quantum SDK support
pip install cirq-ionq      # For Cirq + IonQ
pip install qiskit-ionq    # For Qiskit + IonQ
```

### Basic Usage with Mock Backend

```python
from q_store import QuantumDatabase, DatabaseConfig
import numpy as np

# Configure with mock backend (perfect for testing)
config = DatabaseConfig(
    pinecone_api_key="your-key",
    pinecone_environment="us-east-1",
    quantum_sdk="mock"  # No API key needed!
)

db = QuantumDatabase(config)

async with db.connect():
    # Insert vectors
    vector = np.random.rand(768)
    await db.insert(
        id="vec_1",
        vector=vector,
        contexts=[("finance", 0.7), ("tech", 0.3)],
        metadata={"source": "example"}
    )
    
    # Query with quantum enhancement
    results = await db.query(
        vector=vector,
        context="finance",
        top_k=10
    )
```

### Using Real Quantum Hardware

```python
# With Cirq + IonQ
config = DatabaseConfig(
    pinecone_api_key="your-pinecone-key",
    pinecone_environment="us-east-1",
    quantum_sdk="cirq",
    quantum_api_key="your-ionq-key",
    quantum_target="simulator"  # or "qpu.aria-1"
)

# Or with Qiskit + IonQ
config = DatabaseConfig(
    pinecone_api_key="your-pinecone-key",
    pinecone_environment="us-east-1",
    quantum_sdk="qiskit",
    quantum_api_key="your-ionq-key"
)
```

### Using Multiple Backends

```python
from q_store.backends import BackendManager, MockQuantumBackend

# Create manager
manager = BackendManager()

# Register multiple backends
ideal_sim = MockQuantumBackend("ideal", max_qubits=20, noise_level=0.0)
noisy_sim = MockQuantumBackend("noisy", max_qubits=20, noise_level=0.05)

manager.register_backend("ideal", ideal_sim, set_as_default=True)
manager.register_backend("noisy", noisy_sim)

# Create database with manager
db = QuantumDatabase(config, backend_manager=manager)

# List available backends
print(db.list_backends())

# Switch backends dynamically
db.switch_backend("noisy")
```

## ğŸ“ New File Structure

```
src/q_store/
â”œâ”€â”€ backends/
â”‚   â”œâ”€â”€ quantum_backend_interface.py  # Core abstraction layer (NEW)
â”‚   â”œâ”€â”€ backend_manager.py            # Backend plugin manager (NEW)
â”‚   â”œâ”€â”€ cirq_ionq_adapter.py         # Cirq adapter (NEW)
â”‚   â”œâ”€â”€ qiskit_ionq_adapter.py       # Qiskit adapter (NEW)
â”‚   â”œâ”€â”€ ionq_backend.py              # Legacy (kept for compatibility)
â”‚   â””â”€â”€ __init__.py                  # Updated exports
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ quantum_database.py          # Updated to v3.1
â”‚   â”œâ”€â”€ tunneling_engine.py          # Updated to v2 (hardware-agnostic)
â”‚   â”œâ”€â”€ state_manager.py             # Unchanged
â”‚   â””â”€â”€ entanglement_registry.py     # Unchanged
â””â”€â”€ __init__.py                      # Updated to v3.1

examples/src/q_store_examples/
â””â”€â”€ examples_v31.py                  # Comprehensive examples (NEW)
```

## ğŸ”Œ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Quantum Database API                â”‚
â”‚      (User-facing, backend-agnostic)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Quantum Backend Abstraction Layer       â”‚
â”‚  â€¢ QuantumBackend Interface                 â”‚
â”‚  â€¢ QuantumCircuit IR                        â”‚
â”‚  â€¢ ExecutionResult Normalization            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mock Backend   â”‚ â”‚  Real Backends   â”‚
â”‚ (Testing)      â”‚ â”‚  â€¢ Cirq-IonQ     â”‚
â”‚                â”‚ â”‚  â€¢ Qiskit-IonQ   â”‚
â”‚                â”‚ â”‚  â€¢ Future: AWS,  â”‚
â”‚                â”‚ â”‚    IBM, Google   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Adding New Backends

Adding a new quantum backend is straightforward:

```python
from q_store.backends import QuantumBackend, BackendCapabilities

class MyQuantumBackend(QuantumBackend):
    async def initialize(self):
        # Connect to your quantum service
        pass
    
    async def execute_circuit(self, circuit, shots=1000):
        # Execute quantum circuit
        pass
    
    def get_capabilities(self):
        # Return backend capabilities
        pass
    
    # Implement other required methods...
```

Then register it:

```python
manager.register_backend("my_backend", MyQuantumBackend())
```

## ğŸ§ª Testing

### Run Examples

```bash
cd /home/yucelz/yz_code/q-store/examples/src/q_store_examples
python examples_v31.py
```

### Unit Tests with Mock Backend

```python
from q_store.backends import MockQuantumBackend

# No API keys needed!
mock = MockQuantumBackend("test", max_qubits=10, noise_level=0.0)
await mock.initialize()

# Test your circuits
result = await mock.execute_circuit(test_circuit, shots=1000)
```

## ğŸ“Š Migration from v2.0

### What Changed?

**Import Changes:**
```python
# Old (v2.0)
from q_store import QuantumDatabase, DatabaseConfig

# New (v3.1) - same imports work, plus new ones available
from q_store import QuantumDatabase, DatabaseConfig
from q_store.backends import BackendManager, MockQuantumBackend
```

**Configuration:**
```python
# Old (v2.0)
config = DatabaseConfig(
    ionq_api_key="key",
    ionq_target="simulator"
)

# New (v3.1) - old config still works!
config = DatabaseConfig(
    quantum_sdk="cirq",  # or "qiskit" or "mock"
    quantum_api_key="key",
    quantum_target="simulator"
)

# Backward compatible - old config automatically converted
config = DatabaseConfig(
    ionq_api_key="key",  # Automatically used as quantum_api_key
    ionq_target="simulator"  # Automatically used as quantum_target
)
```

### Backward Compatibility

âœ… All v2.0 code continues to work without changes
âœ… Old `ionq_api_key` config parameter automatically mapped to `quantum_api_key`
âœ… Legacy `IonQQuantumBackend` still available for direct use

## ğŸ“ Examples

See `examples/src/q_store_examples/examples_v31.py` for comprehensive examples including:

1. **Basic Usage with Mock Backend** - Testing without API keys
2. **Multiple Backends** - Switching between different quantum simulators
3. **Cirq vs Qiskit** - Comparing SDK performance
4. **Circuit Building** - Using hardware-agnostic circuit interface
5. **Backend Selection** - Automatic backend selection
6. **Production Deployment** - Best practices for production

## ğŸ“ Key Benefits

| Feature | v2.0 | v3.1 |
|---------|------|------|
| Quantum SDK Support | Cirq only | Cirq, Qiskit, extensible |
| Testing | Requires IonQ API | Mock backend included |
| Backend Switching | Hard-coded | Dynamic via BackendManager |
| Future-Proofing | Limited | Plugin architecture |
| Vendor Lock-in | Yes (IonQ/Cirq) | No (abstracted) |

## ğŸ”® Future Roadmap

- [ ] AWS Braket adapter
- [ ] IBM Quantum adapter  
- [ ] Google Quantum AI adapter
- [ ] Local simulator optimizations
- [ ] Circuit optimization layer
- [ ] Advanced error mitigation

## ğŸ“– Documentation

See `/docs/Quantum-Native Database Architecture v3.1.md` for detailed architecture documentation.

## ğŸ¤ Contributing

To add a new backend:

1. Implement the `QuantumBackend` interface
2. Add adapter in `src/q_store/backends/`
3. Register in `backend_manager.py`
4. Add examples in `examples_v31.py`
5. Update documentation

## ğŸ“„ License

Same as parent project.

---

**Version:** 3.1.0  
**Status:** Production Ready  
**Backward Compatible:** Yes (with v2.0)
